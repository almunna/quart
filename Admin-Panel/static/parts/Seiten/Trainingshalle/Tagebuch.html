<!DOCTYPE html>
<html lang="en">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
	<title>{{ WhiteLabel['Bezeichnung'] }} | Tagebuch → Trainingshalle</title>
	<!--favicon-->
	<link rel="icon" href="https://cdn.personalpeak360.de/white-label/{{ WhiteLabel['Favicon'] }}" type="image/png">
	<!--plugins-->
	<link href="https://cdn.personalpeak360.de/syndash/assets/plugins/simplebar/css/simplebar.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flipdown/dist/flipdown.min.css">
	<!--Data Tables -->
	<link href="https://cdn.personalpeak360.de/syndash/assets/plugins/datatable/css/dataTables.bootstrap4.min.css" rel="stylesheet" type="text/css">
	<link href="https://cdn.personalpeak360.de/syndash/assets/plugins/datatable/css/buttons.bootstrap4.min.css" rel="stylesheet" type="text/css">
	<!--plugins-->
	<link href="https://cdn.personalpeak360.de/syndash/assets/plugins/simplebar/css/simplebar.css" rel="stylesheet" />
	<link href="https://cdn.personalpeak360.de/syndash/assets/plugins/fullcalendar/css/main.min.css" rel="stylesheet" />
	<link href="https://cdn.personalpeak360.de/syndash/assets/plugins/perfect-scrollbar/css/perfect-scrollbar.css" rel="stylesheet" />
	<link href="https://cdn.personalpeak360.de/syndash/assets/plugins/metismenu/css/metisMenu.min.css" rel="stylesheet" />
	<!-- loader-->
	<link href="https://cdn.personalpeak360.de/syndash/assets/css/pace.min.css" rel="stylesheet" />
	<script src="https://cdn.personalpeak360.de/syndash/assets/js/pace.min.js"></script>
	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://cdn.personalpeak360.de/syndash/assets/css/bootstrap.min.css" />
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600&family=Roboto&display=swap" />
	<!-- Icons CSS -->
	<link rel="stylesheet" href="https://cdn.personalpeak360.de/syndash/assets/css/icons.css" />
	<!-- App CSS -->
	<link rel="stylesheet" href="https://cdn.personalpeak360.de/syndash/assets/css/app.css" />
	<link rel="stylesheet" href="https://cdn.personalpeak360.de/syndash/assets/css/dark-sidebar.css" />
	<link rel="stylesheet" href="https://cdn.personalpeak360.de/syndash/assets/css/dark-theme.css" />

	<script src="https://cdn.personalpeak360.de/assets/custom/benachrichtigung/benachrichtigung.js"></script>
	<link rel="stylesheet" href="https://cdn.personalpeak360.de/assets/custom/benachrichtigung/benachrichtigung.css">
	<script src="https://cdn.personalpeak360.de/assets/vendor/js/vue.js"></script>
</head>

<body>
	<div class="modal fade" id="modal_Erstellen" tabindex="-1" aria-labelledby="modal_Erstellen" style="display: none;" aria-hidden="true">
		<div class="modal-dialog">
			<form action="https://dashboard.{{ WhiteLabel['Domain'] }}/cockpit/live-chat/anfrage" method="post" id="Erstellen_FORM">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="exampleModalLabel">Neue Live-Chat Sitzung vereinbaren</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body" style="word-wrap: break-word; white-space: normal;">
						<div class="form-group mb-3">
							<label for="Thema">Thema</label>
							<input type="text" class="form-control" name="Thema" id="Thema">
						</div>

						<div class="form-group">
							<label for="Datum">Gewünschtes Datum</label>
							<input type="date" class="form-control" name="Datum" id="Datum">
						</div>
						<div class="form-group">
							<label for="Uhrzeit">Gewünschte Uhrzeit</label>
							<input type="time" class="form-control" name="Uhrzeit" id="Uhrzeit">
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Abbrechen</button>
						<button type="submit" class="btn btn-primary">Buchung absenden</button>
					</div>
				</div>
			</form>
		</div>
	</div>


	<!-- wrapper -->
	<div class="wrapper">
		<!--sidebar-wrapper-->
		{{ sidebar | safe }}
		<!--end sidebar-wrapper-->
		
		{{ header | safe }}


		<!--page-wrapper-->
        <div class="page-wrapper">
            <!--page-content-wrapper-->
            <div class="page-content-wrapper">
                <div class="page-content">
					{% if Trainingshalle_Details['Letzter_FitnessTest']['Status'] != "Abgeschlossen" and Trainingshalle_Details['Letzter_FitnessTest']['Status'] != "Keine Daten verfügbar" %}
						<div class="alert alert-info alert-dismissible text-center" role="alert" id="trainings-info">
							<h4 class="alert-heading" id="trainings-title">Trainingsplan wird erstellt!</h4>
							<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
							<p id="trainings-description">Dein Trainingsplan wird gerade erstellt. Bitte habe einen Moment Geduld, während wir alle relevanten Daten analysieren und deinen individuellen Plan zusammenstellen.</p>
							<div style="display: block; margin-left: auto; margin-right: auto; width: fit-content;" id="flipdown2" class="flipdown"></div>
							<hr>
							<p class="mb-0" id="trainings-footer">In der Zwischenzeit hast du eingeschränkten Zugriff auf die Trainingshalle. Einige Funktionen stehen dir erst nach Abschluss der Erstellung deines individuellen Trainingsplans zur Verfügung.</p>
						</div>

						<script>
							document.addEventListener("DOMContentLoaded", function () {
								// Überprüfen, ob das Ziel-Element existiert
								const flipdownElement = document.getElementById('flipdown2');
								if (!flipdownElement) {
									console.error('FlipDown element not found!');
									return;
								}

								// Zeitstempel aus Jinja2 (ISO-Format)
								var timestamp = "{{ Trainingshalle_Details['Letzter_FitnessTest']['Daten']['Zeitstempel'] }}";
								if (!timestamp) {
									console.error('Zeitstempel fehlt!');
									return;
								}

								// Konvertiere das Ziel-Datum in einen Unix-Zeitstempel (in Sekunden)
								var currentDate = Math.floor(new Date(timestamp).getTime() / 1000);

								// 48 Stunden in Sekunden
								var hours48 = 48 * 60 * 60;

								// Ziel-Datum (heute + 48 Stunden)
								var targetDate = currentDate + hours48;

								// FlipDown initialisieren
								var flipdown = new FlipDown(targetDate, 'flipdown2', {
									headings: ["Tage", "Stunden", "Minuten", "Sekunden"]
								})
									// Countdown starten
									.start()
									// Funktion ausführen, wenn der Countdown endet
									.ifEnded(() => {
										console.log('Der Countdown ist abgelaufen!');

										// Ändere den Inhalt der Meldung
										const infoContainer = document.getElementById('trainings-info');
										infoContainer.classList.remove('alert-info');
										infoContainer.classList.add('alert-warning');

										document.getElementById('trainings-title').textContent = 'Dein Trainingsplan verzögert sich!';
										document.getElementById('trainings-description').textContent =
											'Leider ist dein Trainer derzeit im Verzug. Dies kann verschiedene Gründe haben, wie eine unerwartete Arbeitslast oder technische Probleme.';
										document.getElementById('flipdown2').style.display = 'none'; // Verberge den Countdown
										document.getElementById('trainings-footer').textContent =
											'Bitte setze dich mit deinem Trainer in Verbindung, um weitere Informationen zu erhalten.';
									});
							});
						</script>
					{% endif %}

                    
                    <div class="card radius-15 mb-3">
                        <div class="card-body">
                            <div class="card-title">
                                <h4 class="mb-0">Tagebuch</h4>
                                <h6 class="mb-0">Auf dieser Seite kannst Du Dein Tagebuch täglich vervollständigen und Die Historie der letzten 7 Tage einsehen.</h6>
                            </div>
                        </div>
                    </div>

                    <style>
                        /* Container für Feedback-Elemente */
                        .feedback-container {
                            display: flex;
                            flex-direction: column;
                            gap: 20px;
                            padding: 20px;
                        }

                        /* Feedback-Item für jede Frage */
                        .feedback-item {
                            display: flex;
                            align-items: center;
                            justify-content: space-between;
                            background-color: #f9f9f9;
                            padding: 10px 20px;
                            border-radius: 8px;
                            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                        }

                        /* Frage im Feedback-Item */
                        .feedback-question {
                            flex: 2; /* Frage nimmt den größten Teil des Raums ein */
                            text-align: left;
                            font-size: 16px;
                            font-weight: 500;
                            margin-left: 15px;
                        }

                        /* Bild neben der Frage */
                        .feedback-image img {
                            width: 60px;
                            height: 60px;
                            object-fit: cover;
                        }

                        /* Bereich für die Voting-Buttons */
                        .feedback-votes {
                            display: flex;
                            gap: 10px;
                            align-items: center;
                        }

                        /* Stile für die Vote-Buttons */
                        .vote {
                            background: none;
                            border: none;
                            padding: 8px;
                            font-size: 20px;
                            cursor: pointer;
                            transition: background-color 0.3s;
                        }

                        .vote:hover {
                            background-color: #e0e0e0;
                        }

                        /* Reflexionseingabefeld */
                        .feedback-notes .note-remark {
                            display: none; /* Standardmäßig ausgeblendet */
                            flex: 3; /* Reflexion nimmt den verbleibenden Raum ein */
                            padding-left: 10px;
                        }

                        .feedback-notes .note-remark.active {
                            display: block !important; /* Wird angezeigt, wenn die Klasse 'active' hinzugefügt wird */
                            margin-left: 10px;  /* Für einen kleinen Abstand */
                            width: 100%; /* Falls gewünscht */
                        }

                        /* Responsive Design für kleinere Bildschirme */
                        @media (max-width: 768px) {
                            .feedback-item {
                                flex-direction: column; /* Bei kleinen Bildschirmen wird die Reihenfolge vertikal */
                                align-items: flex-start;
                            }

                            .feedback-question {
                                font-size: 14px;
                            }

                            .feedback-votes {
                                margin-top: 10px;
                            }

                            .feedback-notes {
                                padding-left: 0;
                                margin-top: 10px;
                            }
                        }

                        /* Standardzustand der Vote-Buttons */
                        .vote {
                            background: none;
                            border: none;
                            padding: 8px;
                            font-size: 20px;
                            cursor: pointer;
                            transition: background-color 0.3s, color 0.3s;
                        }

                        /* Hover-Effekte für alle Vote-Buttons */
                        .vote:hover {
                            background-color: #e0e0e0;
                        }

                        /* Upvote Button (Standardfarbe) */
                        .vote.upvote {
                            color: green;
                        }

                        /* Downvote Button (Standardfarbe) */
                        .vote.downvote {
                            color: red;
                        }

                        /* Stil, wenn der Button aktiv ist (Klick auf Upvote) */
                        .vote.upvote.active {
                            color: #28a745;  /* Grün für aktiven Upvote */
                            text-shadow: 0 0 10px #28a745; /* Optionale Glüh-Effekt */
                        }

                        /* Stil, wenn der Button aktiv ist (Klick auf Downvote) */
                        .vote.downvote.active {
                            color: #dc3545;  /* Rot für aktiven Downvote */
                            text-shadow: 0 0 10px #dc3545; /* Optionale Glüh-Effekt */
                        }

                        /* Optional: Wenn der Button deaktiviert ist (konnte nicht mehr erneut angeklickt werden) */
                        .vote:disabled {
                            background-color: #f0f0f0;  /* Hintergundfarbe für deaktivierte Buttons */
                            color: gray;
                            cursor: not-allowed;
                        }
                    </style>

                    <script>
                        // Initial date setup
                        let currentDate = new Date();

                        document.addEventListener('DOMContentLoaded', function() {
                            // Create an instance of Notyf
                            var message = new nachricht({
                                duration: 5000,
                                position: {
                                    x: 'right',
                                    y: 'top',
                                },
                                dismissible: true
                            });

                            // Function to send feedback data to the Quart endpoint
                            async function sendFeedback(date, feedbackId, voteType, notes, isText) {
                                try {
                                    // Construct the JSON payload
                                    const payload = {
                                        "Datum": date,
                                        "Nummer der Frage": parseInt(feedbackId),
                                        "Typ": isText ? "Text" : "Vote"
                                    };

                                    if (isText) {
                                        payload["Text"] = notes || '';
                                    } else {
                                        payload["Vote"] = voteType === 'upvote' ? 'up' : 'down';
                                    }

                                    // Send the request
                                    const response = await fetch('/trainingshalle/tagebuch', {
                                        method: 'POST',
                                        headers: {
                                            'Content-Type': 'application/json'
                                        },
                                        body: JSON.stringify(payload)
                                    });

                                    const result = await response.json();
                                    console.log(result.message || result.error);
                                } catch (error) {
                                    console.error('Error:', error);
                                }
                            }

                            // Add event listeners to all vote buttons
                            document.querySelectorAll('.vote').forEach(button => {
                                button.addEventListener('click', function() {
                                    // Get the ID of the clicked button
                                    const voteId = this.getAttribute('data-id');
                                    const isUpvote = this.classList.contains('upvote'); // Determine if it was an upvote or downvote
                                    const voteType = isUpvote ? 'upvote' : 'downvote'; // Set vote type

                                    // Show the associated form fields
                                    const form = document.querySelector(`.note-remark[data-id="${voteId}"]`);
                                    const feedbackNotes = this.closest('.feedback-item').querySelector('.feedback-notes');

                                    if (form) {
                                        form.classList.add('active');
                                        feedbackNotes.classList.add('active'); // Make the form visible
                                        console.log(`Form with data-id=${voteId} is shown.`);
                                    } else {
                                        console.log(`No form with data-id=${voteId} found.`);
                                    }

                                    // Toggle the "active" class on the button
                                    this.classList.add('active');
                                    this.disabled = true;  // Optional: Prevents multiple clicks

                                    // Ensure the other button is enabled
                                    const siblingButton = this.closest('.feedback-votes').querySelector(`.vote:not(.${isUpvote ? 'upvote' : 'downvote'})`);
                                    if (siblingButton) {
                                        siblingButton.disabled = false; // Enable the other button
                                        siblingButton.classList.remove('active'); // Remove the "active" class from the other button
                                    }

                                    // Show success or error message
                                    if (isUpvote) {
                                        message.success(`Sehr gut, weiter so! Schreibe am besten direkt Deine tägliche Reflexion.`);
                                    } else {
                                        message.error(`Schade, aber beim nächsten mal wird's besser! Schreibe am besten direkt Deine tägliche Reflexion.`);
                                    }

                                    // Use the currentDate variable from the outer scope
                                    const formattedDate = `${currentDate.getFullYear()}-${(currentDate.getMonth() + 1).toString().padStart(2, '0')}-${currentDate.getDate().toString().padStart(2, '0')}`;

                                    // Determine if the feedback should be considered "Text" or "Vote"
                                    let isText = false;
                                    let notesText = form ? form.querySelector('textarea').value : '';

                                    // Add a blur event listener to the textarea
                                    if (form) {
                                        form.querySelector('textarea').addEventListener('blur', function() {
                                            isText = true; // Set isText to true since the user interacted with the textarea
                                            notesText = this.value; // Get the value of the textarea
                                            sendFeedback(formattedDate, voteId, voteType, notesText, isText);
                                        });
                                    }

                                    // Automatically send feedback as "Vote"
                                    sendFeedback(formattedDate, voteId, voteType, notesText, isText);
                                });
                            });


                            
                            const dateElement = document.querySelector('.date-title h4');
                            const feedbackContainer = document.querySelector('.feedback-container');

                            // Sample JSON data
                            const feedbackData = {{ Tagebuch_Einträge | tojson }};

                            // Helper function to format the date
                            function formatDate(date) {
                                const days = ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'];
                                const day = days[date.getDay()];
                                const formattedDate = `${day}, der ${date.getDate().toString().padStart(2, '0')}.${(date.getMonth() + 1).toString().padStart(2, '0')}.${date.getFullYear()}`;
                                return formattedDate;
                            }

                            // Function to update the displayed date and feedback
                            function updateDate() {
                                dateElement.textContent = formatDate(currentDate);

                                // Load feedback for the current date
                                const formattedDate = currentDate.toISOString().split('T')[0];
                                const feedbackForDate = feedbackData.find(entry => Object.keys(entry)[0] === formattedDate);

                                // Clear all feedback inputs and vote buttons before populating
                                feedbackContainer.querySelectorAll('.feedback-item').forEach(item => {
                                    // Clear text areas and remove active classes
                                    const textArea = item.querySelector('.note-remark textarea');
                                    const upvoteButton = item.querySelector('.upvote');
                                    const downvoteButton = item.querySelector('.downvote');
                                    const form = item.querySelector('.note-remark');
                                    const feedbackNotes = item.querySelector('.feedback-notes');

                                    textArea.value = ''; // Clear the text area
                                    upvoteButton.classList.remove('active');
                                    downvoteButton.classList.remove('active');
                                    form.classList.remove('active');
                                    feedbackNotes.classList.remove('active'); // Hide the notes by default
                                });

                                
                                if (feedbackForDate) {
                                    const feedback = feedbackForDate[formattedDate];
                                    feedbackContainer.querySelectorAll('.feedback-item').forEach((item, index) => {
                                        const questionId = `Frage${index + 1}`;
                                        const feedbackText = feedback[questionId]?.Text || '';
                                        const feedbackVote = feedback[questionId]?.Vote || '';

                                        if (feedbackText || feedbackVote) { // Only show if there's text or a vote
                                            const textArea = item.querySelector('.note-remark textarea');
                                            const upvoteButton = item.querySelector('.upvote');
                                            const downvoteButton = item.querySelector('.downvote');
                                            const form = item.querySelector('.note-remark');
                                            const feedbackNotes = item.querySelector('.feedback-notes');

                                            // Define the voteId, voteType, notesText, and isText variables
                                            const voteId = index + 1; // Assuming the vote ID is the index + 1
                                            let voteType = 'Text'; // Will be set based on the vote
                                            let notesText = feedbackText; // Use existing feedback text or empty
                                            let isText = false; // Default is false

                                            // Update text area
                                            textArea.value = feedbackText;
                                            form.classList.add('active'); // Make the form visible
                                            feedbackNotes.classList.add('active'); // Make the notes visible

                                            // Update vote buttons
                                            if (feedbackVote === 'up') {
                                                upvoteButton.classList.add('active');
                                                downvoteButton.classList.remove('active');
                                            } else if (feedbackVote === 'down') {
                                                downvoteButton.classList.add('active');
                                                upvoteButton.classList.remove('active');
                                            }

                                            // Remove any existing blur event listeners
                                            const newTextArea = textArea.cloneNode(true); // Clone the textarea
                                            textArea.replaceWith(newTextArea); // Replace the original with the clone

                                            // Add a blur event listener to the new textarea
                                            newTextArea.addEventListener('blur', function() {
                                                // Debugging: Check if the variables are properly defined
                                                console.log("Blur Event Triggered");
                                                console.log("Formatted Date:", formattedDate);
                                                console.log("Vote ID:", voteId);
                                                console.log("Vote Type:", voteType);
                                                console.log("Notes Text (Before Sending):", this.value);

                                                // Check if formattedDate, voteId, and voteType have valid values
                                                if (!formattedDate || !voteId || !voteType) {
                                                    console.error("Error: One or more variables are not defined correctly!");
                                                    return; // Exit the function if any variable is not defined
                                                }

                                                // Set the values and call sendFeedback
                                                isText = true; // Set isText to true since the user interacted with the textarea
                                                notesText = this.value; // Get the value of the textarea
                                                sendFeedback(formattedDate, voteId, voteType, notesText, isText);
                                            });
                                        }
                                    });
                                }




                                // Disable "next-date" button if the current date is today
                                const today = new Date();
                                today.setHours(0, 0, 0, 0);
                                const isToday = currentDate.getTime() >= today.getTime();
                                document.getElementById('next-date').disabled = isToday;

                                // Disable "prev-date" button if the current date is more than 7 days in the past
                                const sevenDaysAgo = new Date();
                                sevenDaysAgo.setDate(today.getDate() - 7);
                                const isSevenDaysAgo = currentDate.getTime() <= sevenDaysAgo.getTime();
                                document.getElementById('prev-date').disabled = isSevenDaysAgo;
                            }

                            // Event listeners for navigation buttons
                            document.getElementById('prev-date').addEventListener('click', () => {
                                currentDate.setDate(currentDate.getDate() - 1);
                                updateDate();
                            });

                            document.getElementById('next-date').addEventListener('click', () => {
                                currentDate.setDate(currentDate.getDate() + 1);
                                updateDate();
                            });

                            // Initialize with the current date
                            updateDate();
                        });
                    </script>

                    <div class="card radius-15">
                        <div class="card-body text-center">
                            <div class="d-flex justify-content-between align-items-center">
                                <button class="btn btn-primary" id="prev-date"><i class="bx bx-left-arrow"></i></button>
                                
                                <div class="card-title date-title">
                                    <h4 class="mb-0 text-center">{{ current_date.strftime('%A, der %d.%m.%Y') }}</h4>
                                </div>
                                
                                <button class="btn btn-primary" id="next-date" disabled><i class="bx bx-right-arrow"></i></button>
                            </div>
                            

                            <div class="feedback-container">
                                <div class="feedback-item">
                                  <div class="feedback-image">
                                    <img src="https://cdn.{{ WhiteLabel['Domain'] }}/assets/images/tagebuch/graph.png" alt="Graph Icon" width="60px">
                                  </div>
                                  <div class="feedback-question">Wie herausfordernd war das heutige Training für dich auf einer Skala von 1 (sehr leicht) bis 10 (sehr schwer)?</div>
                                  <div class="feedback-votes">
                                    <button data-id="1" class="vote upvote btn-success-glow"><span class="bx bx-like"></span></button>
                                    <button data-id="1" class="vote downvote"><span class="bx bx-dislike"></span></button>
                                  </div>
                                  <div class="feedback-notes">
                                    <form data-id="1" class="note-remark">
                                      <textarea type="text" class="form-control" placeholder="Tägliche&nbsp;Reflexionen" rows="1"></textarea>
                                    </form>
                                  </div>
                                </div>
                                
                                <div class="feedback-item">
                                    <div class="feedback-image">
                                      <img src="https://cdn.{{ WhiteLabel['Domain'] }}/assets/images/tagebuch/pain.png" alt="Graph Icon" width="60px">
                                    </div>
                                    <div class="feedback-question">Gab es irgendwelche Schmerzen oder Beschwerden während oder nach dem Training?</div>
                                    <div class="feedback-votes">
                                      <button data-id="2" class="vote upvote btn-success-glow"><span class="bx bx-like"></span></button>
                                      <button data-id="2" class="vote downvote"><span class="bx bx-dislike"></span></button>
                                    </div>
                                    <div class="feedback-notes">
                                      <form data-id="2" class="note-remark">
                                        <textarea type="text" class="form-control" placeholder="Tägliche&nbsp;Reflexionen" rows="1"></textarea>
                                      </form>
                                    </div>
                                </div>
                                
                                <div class="feedback-item">
                                    <div class="feedback-image">
                                      <img src="https://cdn.{{ WhiteLabel['Domain'] }}/assets/images/tagebuch/training.png" alt="Graph Icon" width="60px">
                                    </div>
                                    <div class="feedback-question">Welche Übungen hast du heute absolviert und wie sicher fühltest du dich bei der Ausführung?</div>
                                    <div class="feedback-votes">
                                      <button data-id="3" class="vote upvote btn-success-glow"><span class="bx bx-like"></span></button>
                                      <button data-id="3" class="vote downvote"><span class="bx bx-dislike"></span></button>
                                    </div>
                                    <div class="feedback-notes">
                                      <form data-id="3" class="note-remark">
                                        <textarea type="text" class="form-control" placeholder="Tägliche&nbsp;Reflexionen" rows="1"></textarea>
                                      </form>
                                    </div>
                                </div>
                                
                                <div class="feedback-item">
                                    <div class="feedback-image">
                                      <img src="https://cdn.{{ WhiteLabel['Domain'] }}/assets/images/tagebuch/checklist.png" alt="Graph Icon" width="60px">
                                    </div>
                                    <div class="feedback-question">Warst du in der Lage, die geplanten Übungen und Serien vollständig zu beenden, oder musstest du Anpassungen&nbsp;vornehmen?</div>
                                    <div class="feedback-votes">
                                      <button data-id="4" class="vote upvote btn-success-glow"><span class="bx bx-like"></span></button>
                                      <button data-id="4" class="vote downvote"><span class="bx bx-dislike"></span></button>
                                    </div>
                                    <div class="feedback-notes">
                                      <form data-id="4" class="note-remark">
                                        <textarea type="text" class="form-control" placeholder="Tägliche&nbsp;Reflexionen" rows="1"></textarea>
                                      </form>
                                    </div>
                                </div>
                                
                                <div class="feedback-item">
                                    <div class="feedback-image">
                                      <img src="https://cdn.{{ WhiteLabel['Domain'] }}/assets/images/tagebuch/calm.png" alt="Graph Icon" width="60px">
                                    </div>
                                    <div class="feedback-question">Hat sich deine Energie oder Stimmung nach dem Training verändert?</div>
                                    <div class="feedback-votes">
                                      <button data-id="5" class="vote upvote btn-success-glow"><span class="bx bx-like"></span></button>
                                      <button data-id="5" class="vote downvote"><span class="bx bx-dislike"></span></button>
                                    </div>
                                    <div class="feedback-notes">
                                      <form data-id="5" class="note-remark">
                                        <textarea type="text" class="form-control" placeholder="Tägliche&nbsp;Reflexionen" rows="1"></textarea>
                                      </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--end page-content-wrapper-->
        </div>
        <!--end page-wrapper-->

		<!--start overlay-->
		<div class="overlay toggle-btn-mobile"></div>
		<!--end overlay-->
		<!--Start Back To Top Button--> <a href="javaScript:;" class="back-to-top"><i class='bx bxs-up-arrow-alt'></i></a>
		<!--End Back To Top Button-->
		
        {{ footer | safe }}

	</div>
	<!-- end wrapper -->
	
    {{ theme_customizer | safe }}
    
	<!-- JavaScript -->
	<!-- Bootstrap JS -->
	<script src="https://cdn.personalpeak360.de/syndash/assets/js/bootstrap.bundle.min.js"></script>
	
	<!--plugins-->
	<script src="https://cdn.personalpeak360.de/syndash/assets/js/jquery.min.js"></script>
	<script src="https://cdn.personalpeak360.de/syndash/assets/plugins/simplebar/js/simplebar.min.js"></script>
	<script src="https://cdn.personalpeak360.de/syndash/assets/plugins/metismenu/js/metisMenu.min.js"></script>
	<script src="https://cdn.personalpeak360.de/syndash/assets/plugins/perfect-scrollbar/js/perfect-scrollbar.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flipdown/dist/flipdown.min.js"></script>
	<!--Data Tables js-->
	<script src="https://cdn.personalpeak360.de/syndash/assets/plugins/datatable/js/jquery.dataTables.min.js"></script>
	<script>
		$(document).ready(function () {
			//Default data table
			$('#example').DataTable();
			var table = $('#example2').DataTable({
				lengthChange: false,
				buttons: ['copy', 'excel', 'pdf', 'print', 'colvis']
			});
			table.buttons().container().appendTo('#example2_wrapper .col-md-6:eq(0)');
		});
	</script>
	<!-- App JS -->
	<script src="https://cdn.personalpeak360.de/syndash/assets/js/app.js"></script>

	
	<script>
		new Vue({
			el: '#app',
			data: {
				error: "{{ error }}",
				success: "{{ success }}",
				punkte: "{{ punkte_nachricht }}"
			},
			methods: {
				showMessages() {
					if (this.isErrorVisible) {
						this.showError();
					}
					if (this.isSuccessVisible) {
						this.showSuccess();
					}
					if (this.isPunkteVisible) {
						this.showPunkte();
					}
				},
				showError() {
					// Create an instance of Notyf
					var message = new nachricht({
						duration: 5000,
						position: {
							x: 'right',
							y: 'top',
						},
						dismissible: true
					});
	
					// Display an error notification
					message.error('{{ error }}');
				},
				showSuccess() {
					// Create an instance of Notyf
					var message = new nachricht({
						duration: 5000,
						position: {
							x: 'right',
							y: 'top',
						},
						dismissible: true
					});
	
					// Display a success notification
					message.success('{{ success }}');
				},
				showPunkte() {
					// Create an instance of Notyf
					var message = new nachricht({
						duration: 5000,
						position: {
							x: 'right',
							y: 'top',
						},
						dismissible: true
					});
	
					// Display points notification
					message.success('{{ punkte }}'); // or use message.error() if it should be an error
				}
			},
			computed: {
				isErrorVisible: function () {
					return this.error && this.error !== '' && this.error !== 'None';
				},
				isSuccessVisible: function() {
					return this.success && this.success !== '' && this.success !== 'None';
				},
				isPunkteVisible: function() {
					return this.punkte && this.punkte !== '' && this.punkte !== 'None';
				}
			},
			watch: {
				isErrorVisible(newVal) {
					if (!newVal) {
						this.closeError();
					}
				},
				isSuccessVisible(newVal) {
					if (!newVal) {
						this.closeSuccess();
					}
				},
				isPunkteVisible(newVal) {
					if (!newVal) {
						this.closePunkte(); // You can implement this method if needed
					}
				}
			},
			created() {
				this.$nextTick(() => {
					this.showMessages();
				})
			}
		});
	</script>	
</body>

</html>