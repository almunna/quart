<!DOCTYPE html>
<html lang="en">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
	<title>{{ WhiteLabel['Bezeichnung'] }} | Trainingspläne → Trainingshalle</title>
	<!--favicon-->
	<link rel="icon" href="https://cdn.personalpeak360.de/white-label/{{ WhiteLabel['Favicon'] }}" type="image/png">
	<!--plugins-->
	<link href="https://cdn.personalpeak360.de/syndash/assets/plugins/simplebar/css/simplebar.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flipdown/dist/flipdown.min.css">
	<!--Data Tables -->
	<link href="https://cdn.personalpeak360.de/syndash/assets/plugins/datatable/css/dataTables.bootstrap4.min.css" rel="stylesheet" type="text/css">
	<link href="https://cdn.personalpeak360.de/syndash/assets/plugins/datatable/css/buttons.bootstrap4.min.css" rel="stylesheet" type="text/css">
	<!--plugins-->
	<link href="https://cdn.personalpeak360.de/syndash/assets/plugins/simplebar/css/simplebar.css" rel="stylesheet" />
	<link href="https://cdn.personalpeak360.de/syndash/assets/plugins/fullcalendar/css/main.min.css" rel="stylesheet" />
	<link href="https://cdn.personalpeak360.de/syndash/assets/plugins/perfect-scrollbar/css/perfect-scrollbar.css" rel="stylesheet" />
	<link href="https://cdn.personalpeak360.de/syndash/assets/plugins/metismenu/css/metisMenu.min.css" rel="stylesheet" />
	<!-- loader-->
	<link href="https://cdn.personalpeak360.de/syndash/assets/css/pace.min.css" rel="stylesheet" />
	<script src="https://cdn.personalpeak360.de/syndash/assets/js/pace.min.js"></script>
	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://cdn.personalpeak360.de/syndash/assets/css/bootstrap.min.css" />
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600&family=Roboto&display=swap" />
	<!-- Icons CSS -->
	<link rel="stylesheet" href="https://cdn.personalpeak360.de/syndash/assets/css/icons.css" />
	<!-- App CSS -->
	<link rel="stylesheet" href="https://cdn.personalpeak360.de/syndash/assets/css/app.css" />
	<link rel="stylesheet" href="https://cdn.personalpeak360.de/syndash/assets/css/dark-sidebar.css" />
	<link rel="stylesheet" href="https://cdn.personalpeak360.de/syndash/assets/css/dark-theme.css" />

	<script src="https://cdn.personalpeak360.de/assets/custom/benachrichtigung/benachrichtigung.js"></script>
	<link rel="stylesheet" href="https://cdn.personalpeak360.de/assets/custom/benachrichtigung/benachrichtigung.css">
	<script src="https://cdn.personalpeak360.de/assets/vendor/js/vue.js"></script>
</head>

<body>
	<!-- wrapper -->
	<div class="wrapper">
		<!--sidebar-wrapper-->
		{{ sidebar | safe }}
		<!--end sidebar-wrapper-->
		
		{{ header | safe }}


		<!--page-wrapper-->
        <div class="page-wrapper">
            <!--page-content-wrapper-->
            <div class="page-content-wrapper">
                <div class="page-content">
					{% if Trainingshalle_Details['Letzter_FitnessTest']['Status'] != "Abgeschlossen" and Trainingshalle_Details['Letzter_FitnessTest']['Status'] != "Keine Daten verfügbar" %}
						<div class="alert alert-info alert-dismissible text-center" role="alert" id="trainings-info">
							<h4 class="alert-heading" id="trainings-title">Trainingsplan wird erstellt!</h4>
							<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
							<p id="trainings-description">Dein Trainingsplan wird gerade erstellt. Bitte habe einen Moment Geduld, während wir alle relevanten Daten analysieren und deinen individuellen Plan zusammenstellen.</p>
							<div style="display: block; margin-left: auto; margin-right: auto; width: fit-content;" id="flipdown2" class="flipdown"></div>
							<hr>
							<p class="mb-0" id="trainings-footer">In der Zwischenzeit hast du eingeschränkten Zugriff auf die Trainingshalle. Einige Funktionen stehen dir erst nach Abschluss der Erstellung deines individuellen Trainingsplans zur Verfügung.</p>
						</div>

						<script>
							document.addEventListener("DOMContentLoaded", function () {
								// Überprüfen, ob das Ziel-Element existiert
								const flipdownElement = document.getElementById('flipdown2');
								if (!flipdownElement) {
									console.error('FlipDown element not found!');
									return;
								}

								// Zeitstempel aus Jinja2 (ISO-Format)
								var timestamp = "{{ Trainingshalle_Details['Letzter_FitnessTest']['Daten']['Zeitstempel'] }}";
								if (!timestamp) {
									console.error('Zeitstempel fehlt!');
									return;
								}

								// Konvertiere das Ziel-Datum in einen Unix-Zeitstempel (in Sekunden)
								var currentDate = Math.floor(new Date(timestamp).getTime() / 1000);

								// 48 Stunden in Sekunden
								var hours48 = 48 * 60 * 60;

								// Ziel-Datum (heute + 48 Stunden)
								var targetDate = currentDate + hours48;

								// FlipDown initialisieren
								var flipdown = new FlipDown(targetDate, 'flipdown2', {
									headings: ["Tage", "Stunden", "Minuten", "Sekunden"]
								})
									// Countdown starten
									.start()
									// Funktion ausführen, wenn der Countdown endet
									.ifEnded(() => {
										console.log('Der Countdown ist abgelaufen!');

										// Ändere den Inhalt der Meldung
										const infoContainer = document.getElementById('trainings-info');
										infoContainer.classList.remove('alert-info');
										infoContainer.classList.add('alert-warning');

										document.getElementById('trainings-title').textContent = 'Dein Trainingsplan verzögert sich!';
										document.getElementById('trainings-description').textContent =
											'Leider ist dein Trainer derzeit im Verzug. Dies kann verschiedene Gründe haben, wie eine unerwartete Arbeitslast oder technische Probleme.';
										document.getElementById('flipdown2').style.display = 'none'; // Verberge den Countdown
										document.getElementById('trainings-footer').textContent =
											'Bitte setze dich mit deinem Trainer in Verbindung, um weitere Informationen zu erhalten.';
									});
							});
						</script>
					{% endif %}

                    
                    <div class="card radius-15 mb-3">
                        <div class="card-body">
                            <div class="card-title">
                                <h4 class="mb-0">Trainingspläne</h4>
                                <h6 class="mb-0">Auf dieser Seite kannst Du Deine individuellen Trainingspläne, aber auch vorgefertigte Trainingspläne anhand Deines Fitness-Levels einsehen.</h6>
                                <h6 class="mb-0">Dies ist besonders für die Wartezeit bis zur Analyse Deines ersten Fitness-Tests hilfreich.</h6>
                            </div>
                        </div>
                    </div>

                    <style>
						.yellow-dot {
							color: var(--primary-color) !important; /* Die Farbe des Punktes auf Gelb setzen */
							font-size: 1.5em; /* Die Größe des Punktes anpassen, falls nötig */
						}

						.exercise-textarea {
							width: 100%;
							max-width: 640px;
							height: 200px;
							font-size: 1em;
							line-height: 1.5;
							padding: 10px;
							border: 1px solid #ccc;
							border-radius: 10px;
							resize: none;
							background-color: #f9f9f9;
							color: #333;
						}
					</style>

					<script>
						document.addEventListener("DOMContentLoaded", function () {
							const cards = document.querySelectorAll(".trainingshalle .card");
							const exerciseDetails = document.querySelector(".exercise-details");
							const exerciseInfo = exerciseDetails ? exerciseDetails.querySelector(".exercise-info") : null;
							const loadingSpinner = document.getElementById('loading-spinner');

							if (!exerciseInfo) {
								console.error("Element 'exercise-info' nicht gefunden.");
								return;
							}

							const exerciseName = exerciseInfo.querySelector("h4");
							const exerciseVideo = exerciseInfo.querySelector(".exercise-video video");
							const exerciseText = exerciseInfo.querySelector(".exercise-textarea");


							if (!exerciseName || !exerciseVideo || !exerciseText) {
								console.error("Ein oder mehrere Elemente wurden nicht gefunden.");
								return;
							}

							cards.forEach(card => {
								card.addEventListener("click", () => {
									loadingSpinner.classList.remove('d-none');

									const name = card.getAttribute("data-name");
									const video = card.getAttribute("data-video");
									const text = card.getAttribute("data-text");

									// Übungsdetails aktualisieren
									exerciseName.innerHTML = '<span class="yellow-dot">•</span> ' + name + ' <span class="yellow-dot">•</span>';
									exerciseVideo.setAttribute("src", 'https://cdn.personalpeak360.de/trainingshalle/' + video);
									exerciseText.value = text;


									// Ladeereignisse hinzufügen
									let videoLoaded = false;
									let audioLoaded = false;

									exerciseVideo.onloadeddata = () => {
										videoLoaded = true;
										checkIfLoaded();
									};

									// Funktion zum Überprüfen, ob beide Ressourcen geladen sind
									function checkIfLoaded() {
										if (videoLoaded) {
											loadingSpinner.classList.add('d-none'); // Spinner ausblenden
										}
									}

									// Zeige die Übungsdetails an
									exerciseDetails.querySelector("p").classList.add("d-none");
									exerciseInfo.classList.remove("d-none");
								});
							});
						});
					</script>


					<script>
						document.addEventListener('languageChanged', function(e) {
							const { langCode, flagCode } = e.detail;
							console.log(`Die Sprache wurde zu ${langCode} (${flagCode}) geändert!!!`);

							// Hier kannst du deine eigene Funktion aufrufen, die nach der Sprachänderung ausgeführt wird
							performSearch(currentPage);
						});
						
						
						////////////////////////////////
						// RENDERN DER SUCHERGEBNISSE //
						////////////////////////////////
						
						
						// RENDERN DER SUCHERGEBNISSE
						document.addEventListener('DOMContentLoaded', function() {
							// Füge den Event-Listener für den Suchbutton und die Enter-Taste hinzu
							const searchButton = document.getElementById('button-suche');
							const searchBar = document.getElementById('search-bar');
							const loadingSpinner = document.getElementById('loading-spinner');
							const loadingSpinnerBackground = document.getElementById('loading-spinnerBackground');
							
							const exerciseDetails = document.querySelector(".exercise-details");
							const exerciseInfo = exerciseDetails ? exerciseDetails.querySelector(".exercise-info") : null;

							if (!exerciseInfo) {
								console.error("Element 'exercise-info' nicht gefunden.");
								return;
							}

							const trainingshalle = document.querySelector('.trainingshalle div');
							const paginationContainer = document.querySelector('.pagination.round-pagination'); // Verweis auf deine Paginierung

							if (!paginationContainer) {
								console.error("Element 'pagination' nicht gefunden.");
								return;
							}

							const exerciseName = exerciseInfo.querySelector("h4");
							const exerciseVideo = exerciseInfo.querySelector(".exercise-video video");
							const exerciseAudio = exerciseInfo.querySelector(".exercise-audio audio");
							const hintsTab = document.querySelector("#pills-Hinweise");
							const tipsTab = document.querySelector("#pills-Tipps");
							const muscleGroupsTab = document.querySelector("#pills-Muskelgruppen");



							let currentPage = 1;
							let totalPages = 1;

							// Funktion zum Ausführen der Suche
							window.performSearch = (page = 1) => {
								if (typeof page !== 'number') {
									console.error("Page-Parameter ist keine Zahl:", page);
									return;
								}

								trainingshalle.innerHTML = ''; // Alte Inhalte löschen
								const searchValue = searchBar.value;
								const url = `https://dashboard.personalpeak360.de/trainingshalle/Trainingspläne?Art=Suche&Typ=Meine&SUCHE_Name=${encodeURIComponent(searchValue)}&SEITE=${page}`;

								console.log(url)

								// Ladeanimation anzeigen
								loadingSpinner.classList.remove('d-none');
								loadingSpinnerBackground.classList.remove('d-none');

								// Führe die POST-Anfrage aus
								fetch(url, {
									method: 'POST'
								})
								.then(response => response.json())
								.then(data => {
									console.log(data)

									trainingshalle.innerHTML = ''; // Alte Inhalte löschen
									totalPages = data.Seiten; // Die Zuweisung erfolgt jetzt innerhalb des `then`-Blocks

									if (data.Seiten_Inhalt.length > 0) {
										data.Seiten_Inhalt.forEach(übung => {
											if (übung.Typ == "Übungen") {
												const card = document.createElement('div');
												card.className = 'card bg-dark radius-15 mb-1';
												card.style.cursor = 'pointer';

												card.dataset.name = übung.Name;;
												card.dataset.video = übung.Video;
												card.dataset.text = übung.Nachricht;
												card.dataset.übungen = JSON.stringify(übung);

												if (übung.Status == "Abgeschlossen" && übung.Antwort && übung.Antwort_Details) {
													card.dataset.antwort_video = übung.Antwort_Details.Video;
													card.dataset.antwort_text = übung.Antwort_Details.Nachricht;
												}



												const cardBody = document.createElement('div');
												cardBody.className = 'card-body';

												const cardText = document.createElement('p');
												cardText.className = 'card-text text-white';
												cardText.textContent = card.dataset.name;

												cardBody.appendChild(cardText);
												card.appendChild(cardBody);
												trainingshalle.appendChild(card);

												// Click-Event-Listener für die Karten hinzufügen
												card.addEventListener('click', () => {
													const name = card.getAttribute("data-name");
													// Ladeanimation anzeigen
													loadingSpinner.classList.remove("d-none");
													loadingSpinnerBackground.classList.remove("d-none");





													const übungen = JSON.parse(card.dataset.übungen);

													if (!übungen || Object.keys(übungen).length === 0) {
														console.error('Keine Trainingsdaten gefunden.');
														trainingshalle.innerHTML = '<p>Keine Daten verfügbar.</p>';
														return;
													}


													// Name des Trainingsplans erstellen
													const name_trainingsplan = document.createElement('h5');
													name_trainingsplan.className = 'text-center w-100'; // Zentriert den Namen
													name_trainingsplan.innerText = name; // Name des Trainingsplans

													// Button erstellen
													const backButton = document.createElement('button');
													backButton.className = 'btn btn-secondary btn-sm'; // Bootstrap-Klasse für Styling
													backButton.innerHTML = '⬅'; // Pfeil-Symbol

													// Klick-Event für den Button hinzufügen
													backButton.addEventListener('click', () => {
														performSearch(1); // Funktion ausführen
													});

													// Wrapper für den Button erstellen
													const buttonWrapper = document.createElement('div');
													buttonWrapper.className = 'd-flex justify-content-start mb-3'; // Button links oben
													buttonWrapper.appendChild(backButton);

													// Wrapper für den Namen erstellen
													const nameWrapper = document.createElement('div');
													nameWrapper.className = 'd-flex justify-content-center'; // Name in die Mitte
													nameWrapper.appendChild(name_trainingsplan);

													// Gesamten Header erstellen
													const headerWrapper = document.createElement('div');
													headerWrapper.appendChild(buttonWrapper); // Button zuerst
													headerWrapper.appendChild(nameWrapper); // Name darunter



													const tabs = document.createElement('ul');
													tabs.className = 'nav nav-pills mb-3';
													tabs.id = 'pills-tab';
													tabs.role = 'tablist';
													const tabContent = document.createElement('div');
													tabContent.className = 'tab-content';
													tabContent.id = 'pills-tabContent';

													let isFirst = true;


													for (const [week, exercises] of Object.entries(übungen.Daten)) {
														// Tab erstellen
														const tab = document.createElement('li');
														tab.className = 'nav-item';
														tab.role = 'presentation';

														const tabLink = document.createElement('a');
														tabLink.className = `nav-link ${isFirst ? 'active' : ''}`;
														tabLink.id = `pills-${week}-tab`;
														tabLink.dataset.bsToggle = 'pill';
														tabLink.href = `#pills-${week.replace(' ', '-')}`;
														tabLink.role = 'tab';
														tabLink.ariaControls = `pills-${week.replace(' ', '-')}`;
														tabLink.ariaSelected = isFirst ? 'true' : 'false';
														tabLink.textContent = week.replace('_', ' ');

														tab.appendChild(tabLink);
														tabs.appendChild(tab);

														// Tab-Inhalt erstellen
														const tabPane = document.createElement('div');
														tabPane.className = `tab-pane fade ${isFirst ? 'active show' : ''}`;
														tabPane.id = `pills-${week.replace(' ', '-')}`;
														tabPane.role = 'tabpanel';
														tabPane.ariaLabelledby = `pills-${week}-tab`;

														console.log(week)
														console.log(exercises); // Überprüfen, ob `exercises` ein Array ist

														
														exercises.forEach(übung => {
															console.log("übung")
															console.log(übung)
															const cardExercise = document.createElement('div');
															cardExercise.className = 'card exercise-cardTrainingsPlan bg-dark radius-15 mb-1';
															cardExercise.style.cursor = 'pointer';

															const languages = ["DE", "EN", "ES", "AR", "GR", "RU"]; // Verfügbare Sprachen
															// Annahme: "übung.Texte" enthält die Sprachdaten
															languages.forEach(lang => {
																cardExercise.dataset[`name_${lang}`] = übung.Details.Texte[lang]?.Name || "";
																cardExercise.dataset[`tipps_${lang}`] = übung.Details.Texte[lang]?.Tipps || "";
																cardExercise.dataset[`hinweise_${lang}`] = übung.Details.Texte[lang]?.Hinweise || "";
																cardExercise.dataset[`voiceover_${lang}`] = übung.Details.Texte[lang]?.Voiceover_ID || "";
															});


															cardExercise.dataset.animation = übung.Details.Animation;
															// Prüfe, ob es Muskelgruppen gibt
															if (übung.Details.Muskelgruppen && übung.Details.Muskelgruppen.length > 1) {
															// Erstelle den Text mit "und" vor dem letzten Element
															const muscleGroupsText = übung.Details.Muskelgruppen.slice(0, -1).join(', ') + ' und ' + übung.Details.Muskelgruppen.slice(-1);
															cardExercise.dataset.muskelgruppen = muscleGroupsText;
															} else {
															// Wenn nur eine Muskelgruppe vorhanden ist oder keine, direkt verwenden
															cardExercise.dataset.muskelgruppen = übung.Details.Muskelgruppen.join(', ');
															}

															const cardBody = document.createElement('div');
															cardBody.className = 'card-body';

															const cardTitle = document.createElement('p');
															cardTitle.className = 'card-text text-white';
															cardTitle.textContent = übung.Details.Texte[selectedLang].Name;

															const cardInfo = document.createElement('small');
															cardInfo.className = 'text-muted';
															cardInfo.textContent = `Sätze: ${übung.Sätze}, Wiederholungen: ${übung.Wiederholungen}, Pause: ${übung.Pause} Sek.`;

															const cardNotes = document.createElement('p');
															cardNotes.className = 'text-muted mb-0';
															cardNotes.textContent = übung.Notizen;

															cardBody.appendChild(cardTitle);
															cardBody.appendChild(cardInfo);
															cardBody.appendChild(cardNotes);

															cardExercise.appendChild(cardBody);
															tabPane.appendChild(cardExercise);

															// Click-Event-Listener für die Karten hinzufügen
															cardExercise.addEventListener('click', () => {
																loadingSpinner.classList.remove('d-none');
																const name = cardExercise.getAttribute("data-name");
																const tips = cardExercise.getAttribute("data-tipps");
																const hints = cardExercise.getAttribute("data-hinweise");
																const animation = cardExercise.getAttribute("data-animation");
																const muscleGroups = cardExercise.getAttribute("data-muskelgruppen");
																const voiceover = cardExercise.getAttribute("data-voiceover");

																// Übungsdetails aktualisieren
																exerciseName.innerHTML = `<span class="yellow-dot">•</span> ${cardExercise.dataset[`name_${selectedLang}`]} <span class="yellow-dot">•</span>`;
																exerciseVideo.setAttribute("src", `https://cdn.personalpeak360.de/trainingshalle/${cardExercise.dataset.animation}`);
																exerciseAudio.querySelector("source").setAttribute("src", `https://cdn.personalpeak360.de/trainingshalle/${cardExercise.dataset[`voiceover_${selectedLang}`]}`);
																exerciseAudio.load(); // Audio neu laden

																// Textinhalte aktualisieren
																hintsTab.textContent = cardExercise.dataset[`hinweise_${selectedLang}`];
																tipsTab.textContent = cardExercise.dataset[`tipps_${selectedLang}`];
																muscleGroupsTab.innerHTML = cardExercise.dataset.muskelgruppen;

																// Zeige die Übungsdetails an
																exerciseDetails.querySelector("p").classList.add("d-none");
																exerciseInfo.classList.remove("d-none");

																// Ladeereignisse hinzufügen
																let videoLoaded = false;
																let audioLoaded = false;

																exerciseVideo.onloadeddata = () => {
																	videoLoaded = true;
																	checkIfLoaded();
																};

																exerciseAudio.oncanplaythrough = () => {
																	audioLoaded = true;
																	checkIfLoaded();
																};

																// Funktion zum Überprüfen, ob beide Ressourcen geladen sind
																function checkIfLoaded() {
																	if (videoLoaded && audioLoaded) {
																		loadingSpinner.classList.add('d-none'); // Spinner ausblenden
																	}
																}

																exerciseAudio.load(); // Neue Audio-Datei laden

																// Textinhalte aktualisieren
																hintsTab.textContent = hints;
																tipsTab.textContent = tips;
																muscleGroupsTab.textContent = muscleGroups;

																// Zeige die Übungsdetails an
																exerciseDetails.querySelector("p").classList.add("d-none");
																exerciseInfo.classList.remove("d-none");
																
																// Element sichtbar machen
																const trainingsplanInfo = document.querySelector('.trainingsplan-info');
																trainingsplanInfo.classList.add('d-none');
															});
														});

														tabContent.appendChild(tabPane);
														isFirst = false;
													}

													trainingshalle.innerHTML = '';
													// Wrapper in die Trainingshalle einfügen
													trainingshalle.appendChild(headerWrapper);
													trainingshalle.appendChild(tabs);
													trainingshalle.appendChild(tabContent);



													loadingSpinner.classList.add('d-none');
													loadingSpinnerBackground.classList.add('d-none');
												});
											} else {
												console.log("Diese Übung besteht aus einer Datei!")

												
												const trainingsplanInfo = exerciseDetails ? exerciseDetails.querySelector(".trainingsplan-info") : null;
												const exerciseInfo = exerciseDetails ? exerciseDetails.querySelector(".exercise-info") : null;

												if (!exerciseInfo) {
													console.error("Element 'exercise-info' nicht gefunden.");
													return;
												}

												const trainingshalle = document.querySelector('.trainingshalle div');
												const paginationContainer = document.querySelector('.pagination.round-pagination'); // Verweis auf deine Paginierung

												if (!paginationContainer) {
													console.error("Element 'pagination' nicht gefunden.");
													return;
												}

												const exerciseName = trainingsplanInfo.querySelector("h4");
												const exerciseDownload = trainingsplanInfo.querySelector("h5");


												const card2 = document.createElement('div');
												card2.className = 'card bg-dark radius-15 mb-1';
												card2.style.cursor = 'pointer';

												card2.dataset.Datei = übung.Datei;
												card2.dataset.name = übung.Name;


												const cardBody = document.createElement('div');
												cardBody.className = 'card-body';

												const cardText = document.createElement('p');
												cardText.className = 'card-text text-white';
												cardText.textContent = card2.dataset.name;

												cardBody.appendChild(cardText);
												card2.appendChild(cardBody);
												trainingshalle.appendChild(card2);

												// Click-Event-Listener für die Karten hinzufügen
												card2.addEventListener('click', () => {
													loadingSpinner.classList.remove('d-none');
													const datei = card2.getAttribute("data-Datei");

													// Datei-Link einfügen
													// Element auswählen, das die Trainingsplan-Informationen enthält
													const trainingsplanInfo = document.querySelector('.trainingsplan-info');

													if (!trainingsplanInfo) {
														console.error("Element '.trainingsplan-info' nicht gefunden.");
														return;
													}

													// Name der Übung aktualisieren
													const exerciseName = trainingsplanInfo.querySelector('h4');
													exerciseName.innerHTML = `<span class="yellow-dot">•</span> ${card2.dataset.name} <span class="yellow-dot">•</span>`;
													exerciseName.classList.add('mb-5')

													exerciseDetails.querySelector("p").classList.add("d-none");

													// Download-Link aktualisieren
													const downloadLink = trainingsplanInfo.querySelector('a');
													downloadLink.href = `https://cdn.{{ WhiteLabel['Domain'] }}/trainingsplan-datei/${übung.Datei}`; // Dynamische Datei
													downloadLink.innerText = 'Datei herunterladen'; // Text bleibt gleich

													// Vorschau aktualisieren
													const iframe = trainingsplanInfo.querySelector('iframe');
													const noPreviewText = trainingsplanInfo.querySelector('.no-preview-text'); // Prüfe, ob ein Vorschautext bereits existiert

													if (übung.Datei.endsWith('.pdf')) {
														iframe.src = `https://cdn.${WhiteLabel['Domain']}/trainingsplan-datei/${übung.Datei}`; // Dynamischer Pfad
														iframe.classList.remove('d-none'); // Vorschau anzeigen

														// Entferne den vorhandenen Alternativtext, falls er existiert
														if (noPreviewText) {
															noPreviewText.remove();
														}
													} else {
														iframe.classList.add('d-none'); // Vorschau ausblenden, wenn keine PDF

														if (noPreviewText) {
															// Aktualisiere den vorhandenen Text
															noPreviewText.innerText = 'Vorschau nicht verfügbar. Bitte laden Sie die Datei herunter.';
														} else {
															// Falls kein Text existiert, füge ihn hinzu
															const newNoPreviewText = document.createElement('p');
															newNoPreviewText.className = 'mt-3 no-preview-text'; // Füge eine eindeutige Klasse hinzu
															newNoPreviewText.innerText = 'Vorschau nicht verfügbar. Bitte laden Sie die Datei herunter.';
															trainingsplanInfo.appendChild(newNoPreviewText);
														}
													}


													// Element sichtbar machen
													trainingsplanInfo.classList.remove('d-none');

													

													// Zeige die Übungsdetails an
													exerciseInfo.classList.add("d-none");

													
													loadingSpinner.classList.add('d-none');
													loadingSpinnerBackground.classList.add('d-none');
												});
											}
										});

										// Paginierung aktualisieren
										updatePagination();
										loadingSpinner.classList.add('d-none');
										loadingSpinnerBackground.classList.add('d-none');
									} else {
										loadingSpinner.classList.add('d-none');
										loadingSpinnerBackground.classList.add('d-none');

										const noResults = document.createElement('p');
										noResults.className = 'text-center text-muted';
										noResults.textContent = 'Keine Trainingspläne in dieser Kategorie gefunden.';
										trainingshalle.appendChild(noResults);
									}
								})
								.catch(error => {
									console.error('Fehler bei der Suchanfrage:', error);
								});
							};

							

							const updatePagination = () => {
								paginationContainer.innerHTML = ''; // Alte Paginierung löschen

								const prevPageItem = document.createElement('li');
								prevPageItem.className = `page-item ${currentPage === 1 ? 'disabled' : ''}`;
								const prevLink = document.createElement('a');
								prevLink.className = 'page-link';
								prevLink.href = 'javascript:;';
								prevLink.textContent = 'Zurück';
								prevLink.addEventListener('click', () => {
									if (currentPage > 1) {
										currentPage--;
										performSearch(currentPage); // Korrekt: Zahl übergeben
									}
								});
								prevPageItem.appendChild(prevLink);
								paginationContainer.appendChild(prevPageItem);

								for (let i = 1; i <= totalPages; i++) {
									const pageItem = document.createElement('li');
									pageItem.className = `page-item ${i === currentPage ? 'active' : ''}`;
									const pageLink = document.createElement('a');
									pageLink.className = 'page-link';
									pageLink.href = 'javascript:;';
									pageLink.textContent = i;
									pageLink.addEventListener('click', () => {
										currentPage = i;
										performSearch(currentPage); // Korrekt: Zahl übergeben
									});
									pageItem.appendChild(pageLink);
									paginationContainer.appendChild(pageItem);
								}

								const nextPageItem = document.createElement('li');
								nextPageItem.className = `page-item ${currentPage === totalPages ? 'disabled' : ''}`;
								const nextLink = document.createElement('a');
								nextLink.className = 'page-link';
								nextLink.href = 'javascript:;';
								nextLink.textContent = 'Weiter';
								nextLink.addEventListener('click', () => {
									if (currentPage < totalPages) {
										currentPage++;
										performSearch(currentPage); // Korrekt: Zahl übergeben
									}
								});
								nextPageItem.appendChild(nextLink);
								paginationContainer.appendChild(nextPageItem);
							};
							
							if (searchButton) {
								searchButton.addEventListener('click', () => performSearch(1));
							}


							if (searchBar) {
								searchBar.addEventListener('keypress', function(event) {
									if (event.key === 'Enter') {
										performSearch(1);
									}
								});
							}

							// Führe die Suche beim Laden der Seite aus
							performSearch(1);


							
							// Funktion zum Ausführen der Suche
							window.performSearch_TRAINER = (page = 1) => {
								if (typeof page !== 'number') {
									console.error("Page-Parameter ist keine Zahl:", page);
									return;
								}

								trainingshalle.innerHTML = ''; // Alte Inhalte löschen
								const searchValue = searchBar.value;
								const url = `https://dashboard.personalpeak360.de/trainingshalle/Trainingspläne?Art=Suche&Typ=Trainer&SUCHE_Name=${encodeURIComponent(searchValue)}&SEITE=${page}`;

								console.log(url)

								// Ladeanimation anzeigen
								loadingSpinner.classList.remove('d-none');
								loadingSpinnerBackground.classList.remove('d-none');

								// Führe die POST-Anfrage aus
								fetch(url, {
									method: 'POST'
								})
								.then(response => response.json())
								.then(data => {
									console.log(data)

									trainingshalle.innerHTML = ''; // Alte Inhalte löschen
									totalPages = data.Seiten; // Die Zuweisung erfolgt jetzt innerhalb des `then`-Blocks

									if (data.Seiten_Inhalt.length > 0) {
										data.Seiten_Inhalt.forEach(übung => {
											if (übung.Typ == "Übungen") {
												const card = document.createElement('div');
												card.className = 'card bg-dark radius-15 mb-1';
												card.style.cursor = 'pointer';

												card.dataset.name = übung.Name;;
												card.dataset.video = übung.Video;
												card.dataset.text = übung.Nachricht;
												card.dataset.übungen = JSON.stringify(übung);

												if (übung.Status == "Abgeschlossen" && übung.Antwort && übung.Antwort_Details) {
													card.dataset.antwort_video = übung.Antwort_Details.Video;
													card.dataset.antwort_text = übung.Antwort_Details.Nachricht;
												}



												const cardBody = document.createElement('div');
												cardBody.className = 'card-body';

												const cardText = document.createElement('p');
												cardText.className = 'card-text text-white';
												cardText.textContent = card.dataset.name;

												cardBody.appendChild(cardText);
												card.appendChild(cardBody);
												trainingshalle.appendChild(card);

												// Click-Event-Listener für die Karten hinzufügen
												card.addEventListener('click', () => {
													const name = card.getAttribute("data-name");
													// Ladeanimation anzeigen
													loadingSpinner.classList.remove("d-none");
													loadingSpinnerBackground.classList.remove("d-none");





													const übungen = JSON.parse(card.dataset.übungen);

													if (!übungen || Object.keys(übungen).length === 0) {
														console.error('Keine Trainingsdaten gefunden.');
														trainingshalle.innerHTML = '<p>Keine Daten verfügbar.</p>';
														return;
													}


													// Name des Trainingsplans erstellen
													const name_trainingsplan = document.createElement('h5');
													name_trainingsplan.className = 'text-center w-100'; // Zentriert den Namen
													name_trainingsplan.innerText = name; // Name des Trainingsplans

													// Button erstellen
													const backButton = document.createElement('button');
													backButton.className = 'btn btn-secondary btn-sm'; // Bootstrap-Klasse für Styling
													backButton.innerHTML = '⬅'; // Pfeil-Symbol

													// Klick-Event für den Button hinzufügen
													backButton.addEventListener('click', () => {
														performSearch(1); // Funktion ausführen
													});

													// Wrapper für den Button erstellen
													const buttonWrapper = document.createElement('div');
													buttonWrapper.className = 'd-flex justify-content-start mb-3'; // Button links oben
													buttonWrapper.appendChild(backButton);

													// Wrapper für den Namen erstellen
													const nameWrapper = document.createElement('div');
													nameWrapper.className = 'd-flex justify-content-center'; // Name in die Mitte
													nameWrapper.appendChild(name_trainingsplan);

													// Gesamten Header erstellen
													const headerWrapper = document.createElement('div');
													headerWrapper.appendChild(buttonWrapper); // Button zuerst
													headerWrapper.appendChild(nameWrapper); // Name darunter



													const tabs = document.createElement('ul');
													tabs.className = 'nav nav-pills mb-3';
													tabs.id = 'pills-tab';
													tabs.role = 'tablist';
													const tabContent = document.createElement('div');
													tabContent.className = 'tab-content';
													tabContent.id = 'pills-tabContent';

													let isFirst = true;


													for (const [week, exercises] of Object.entries(übungen.Daten)) {
														// Tab erstellen
														const tab = document.createElement('li');
														tab.className = 'nav-item';
														tab.role = 'presentation';

														const tabLink = document.createElement('a');
														tabLink.className = `nav-link ${isFirst ? 'active' : ''}`;
														tabLink.id = `pills-${week}-tab`;
														tabLink.dataset.bsToggle = 'pill';
														tabLink.href = `#pills-${week.replace(' ', '-')}`;
														tabLink.role = 'tab';
														tabLink.ariaControls = `pills-${week.replace(' ', '-')}`;
														tabLink.ariaSelected = isFirst ? 'true' : 'false';
														tabLink.textContent = week.replace('_', ' ');

														tab.appendChild(tabLink);
														tabs.appendChild(tab);

														// Tab-Inhalt erstellen
														const tabPane = document.createElement('div');
														tabPane.className = `tab-pane fade ${isFirst ? 'active show' : ''}`;
														tabPane.id = `pills-${week.replace(' ', '-')}`;
														tabPane.role = 'tabpanel';
														tabPane.ariaLabelledby = `pills-${week}-tab`;

														console.log(week)
														console.log(exercises); // Überprüfen, ob `exercises` ein Array ist

														
														exercises.forEach(übung => {
															console.log("übung")
															console.log(übung)
															const cardExercise = document.createElement('div');
															cardExercise.className = 'card exercise-cardTrainingsPlan bg-dark radius-15 mb-1';
															cardExercise.style.cursor = 'pointer';

															const languages = ["DE", "EN", "ES", "AR", "GR", "RU"]; // Verfügbare Sprachen
															// Annahme: "übung.Texte" enthält die Sprachdaten
															languages.forEach(lang => {
																cardExercise.dataset[`name_${lang}`] = übung.Details.Texte[lang]?.Name || "";
																cardExercise.dataset[`tipps_${lang}`] = übung.Details.Texte[lang]?.Tipps || "";
																cardExercise.dataset[`hinweise_${lang}`] = übung.Details.Texte[lang]?.Hinweise || "";
																cardExercise.dataset[`voiceover_${lang}`] = übung.Details.Texte[lang]?.Voiceover_ID || "";
															});


															cardExercise.dataset.animation = übung.Details.Animation;
															// Prüfe, ob es Muskelgruppen gibt
															if (übung.Details.Muskelgruppen && übung.Details.Muskelgruppen.length > 1) {
															// Erstelle den Text mit "und" vor dem letzten Element
															const muscleGroupsText = übung.Details.Muskelgruppen.slice(0, -1).join(', ') + ' und ' + übung.Details.Muskelgruppen.slice(-1);
															cardExercise.dataset.muskelgruppen = muscleGroupsText;
															} else {
															// Wenn nur eine Muskelgruppe vorhanden ist oder keine, direkt verwenden
															cardExercise.dataset.muskelgruppen = übung.Details.Muskelgruppen.join(', ');
															}

															const cardBody = document.createElement('div');
															cardBody.className = 'card-body';

															const cardTitle = document.createElement('p');
															cardTitle.className = 'card-text text-white';
															cardTitle.textContent = übung.Details.Texte[selectedLang].Name;

															const cardInfo = document.createElement('small');
															cardInfo.className = 'text-muted';
															cardInfo.textContent = `Sätze: ${übung.Sätze}, Wiederholungen: ${übung.Wiederholungen}, Pause: ${übung.Pause} Sek.`;

															const cardNotes = document.createElement('p');
															cardNotes.className = 'text-muted mb-0';
															cardNotes.textContent = übung.Notizen;

															cardBody.appendChild(cardTitle);
															cardBody.appendChild(cardInfo);
															cardBody.appendChild(cardNotes);

															cardExercise.appendChild(cardBody);
															tabPane.appendChild(cardExercise);

															// Click-Event-Listener für die Karten hinzufügen
															cardExercise.addEventListener('click', () => {
																loadingSpinner.classList.remove('d-none');
																const name = cardExercise.getAttribute("data-name");
																const tips = cardExercise.getAttribute("data-tipps");
																const hints = cardExercise.getAttribute("data-hinweise");
																const animation = cardExercise.getAttribute("data-animation");
																const muscleGroups = cardExercise.getAttribute("data-muskelgruppen");
																const voiceover = cardExercise.getAttribute("data-voiceover");

																// Übungsdetails aktualisieren
																exerciseName.innerHTML = `<span class="yellow-dot">•</span> ${cardExercise.dataset[`name_${selectedLang}`]} <span class="yellow-dot">•</span>`;
																exerciseVideo.setAttribute("src", `https://cdn.personalpeak360.de/trainingshalle/${cardExercise.dataset.animation}`);
																exerciseAudio.querySelector("source").setAttribute("src", `https://cdn.personalpeak360.de/trainingshalle/${cardExercise.dataset[`voiceover_${selectedLang}`]}`);
																exerciseAudio.load(); // Audio neu laden

																// Textinhalte aktualisieren
																hintsTab.textContent = cardExercise.dataset[`hinweise_${selectedLang}`];
																tipsTab.textContent = cardExercise.dataset[`tipps_${selectedLang}`];
																muscleGroupsTab.innerHTML = cardExercise.dataset.muskelgruppen;

																// Zeige die Übungsdetails an
																exerciseDetails.querySelector("p").classList.add("d-none");
																exerciseInfo.classList.remove("d-none");

																// Ladeereignisse hinzufügen
																let videoLoaded = false;
																let audioLoaded = false;

																exerciseVideo.onloadeddata = () => {
																	videoLoaded = true;
																	checkIfLoaded();
																};

																exerciseAudio.oncanplaythrough = () => {
																	audioLoaded = true;
																	checkIfLoaded();
																};

																// Funktion zum Überprüfen, ob beide Ressourcen geladen sind
																function checkIfLoaded() {
																	if (videoLoaded && audioLoaded) {
																		loadingSpinner.classList.add('d-none'); // Spinner ausblenden
																	}
																}

																exerciseAudio.load(); // Neue Audio-Datei laden

																// Textinhalte aktualisieren
																hintsTab.textContent = hints;
																tipsTab.textContent = tips;
																muscleGroupsTab.textContent = muscleGroups;

																// Zeige die Übungsdetails an
																exerciseDetails.querySelector("p").classList.add("d-none");
																exerciseInfo.classList.remove("d-none");
																
																// Element sichtbar machen
																const trainingsplanInfo = document.querySelector('.trainingsplan-info');
																trainingsplanInfo.classList.add('d-none');
															});
														});

														tabContent.appendChild(tabPane);
														isFirst = false;
													}

													trainingshalle.innerHTML = '';
													// Wrapper in die Trainingshalle einfügen
													trainingshalle.appendChild(headerWrapper);
													trainingshalle.appendChild(tabs);
													trainingshalle.appendChild(tabContent);



													loadingSpinner.classList.add('d-none');
													loadingSpinnerBackground.classList.add('d-none');
												});
											} else {
												console.log("Diese Übung besteht aus einer Datei!")

												
												const trainingsplanInfo = exerciseDetails ? exerciseDetails.querySelector(".trainingsplan-info") : null;
												const exerciseInfo = exerciseDetails ? exerciseDetails.querySelector(".exercise-info") : null;

												if (!exerciseInfo) {
													console.error("Element 'exercise-info' nicht gefunden.");
													return;
												}

												const trainingshalle = document.querySelector('.trainingshalle div');
												const paginationContainer = document.querySelector('.pagination.round-pagination'); // Verweis auf deine Paginierung

												if (!paginationContainer) {
													console.error("Element 'pagination' nicht gefunden.");
													return;
												}

												const exerciseName = trainingsplanInfo.querySelector("h4");
												const exerciseDownload = trainingsplanInfo.querySelector("h5");


												const card2 = document.createElement('div');
												card2.className = 'card bg-dark radius-15 mb-1';
												card2.style.cursor = 'pointer';

												card2.dataset.Datei = übung.Datei;
												card2.dataset.name = übung.Name;


												const cardBody = document.createElement('div');
												cardBody.className = 'card-body';

												const cardText = document.createElement('p');
												cardText.className = 'card-text text-white';
												cardText.textContent = card2.dataset.name;

												cardBody.appendChild(cardText);
												card2.appendChild(cardBody);
												trainingshalle.appendChild(card2);

												// Click-Event-Listener für die Karten hinzufügen
												card2.addEventListener('click', () => {
													loadingSpinner.classList.remove('d-none');
													const datei = card2.getAttribute("data-Datei");

													// Datei-Link einfügen
													// Element auswählen, das die Trainingsplan-Informationen enthält
													const trainingsplanInfo = document.querySelector('.trainingsplan-info');

													if (!trainingsplanInfo) {
														console.error("Element '.trainingsplan-info' nicht gefunden.");
														return;
													}

													// Name der Übung aktualisieren
													const exerciseName = trainingsplanInfo.querySelector('h4');
													exerciseName.innerHTML = `<span class="yellow-dot">•</span> ${card2.dataset.name} <span class="yellow-dot">•</span>`;
													exerciseName.classList.add('mb-5')

													exerciseDetails.querySelector("p").classList.add("d-none");

													// Download-Link aktualisieren
													const downloadLink = trainingsplanInfo.querySelector('a');
													downloadLink.href = `https://cdn.{{ WhiteLabel['Domain'] }}/trainingsplan-datei/${übung.Datei}`; // Dynamische Datei
													downloadLink.innerText = 'Datei herunterladen'; // Text bleibt gleich

													// Vorschau aktualisieren
													const iframe = trainingsplanInfo.querySelector('iframe');
													const noPreviewText = trainingsplanInfo.querySelector('.no-preview-text'); // Prüfe, ob ein Vorschautext bereits existiert

													if (übung.Datei.endsWith('.pdf')) {
														iframe.src = `https://cdn.${WhiteLabel['Domain']}/trainingsplan-datei/${übung.Datei}`; // Dynamischer Pfad
														iframe.classList.remove('d-none'); // Vorschau anzeigen

														// Entferne den vorhandenen Alternativtext, falls er existiert
														if (noPreviewText) {
															noPreviewText.remove();
														}
													} else {
														iframe.classList.add('d-none'); // Vorschau ausblenden, wenn keine PDF

														if (noPreviewText) {
															// Aktualisiere den vorhandenen Text
															noPreviewText.innerText = 'Vorschau nicht verfügbar. Bitte laden Sie die Datei herunter.';
														} else {
															// Falls kein Text existiert, füge ihn hinzu
															const newNoPreviewText = document.createElement('p');
															newNoPreviewText.className = 'mt-3 no-preview-text'; // Füge eine eindeutige Klasse hinzu
															newNoPreviewText.innerText = 'Vorschau nicht verfügbar. Bitte laden Sie die Datei herunter.';
															trainingsplanInfo.appendChild(newNoPreviewText);
														}
													}


													// Element sichtbar machen
													trainingsplanInfo.classList.remove('d-none');

													

													// Zeige die Übungsdetails an
													exerciseInfo.classList.add("d-none");

													
													loadingSpinner.classList.add('d-none');
													loadingSpinnerBackground.classList.add('d-none');
												});
											}
										});

										// Paginierung aktualisieren
										updatePagination();
										loadingSpinner.classList.add('d-none');
										loadingSpinnerBackground.classList.add('d-none');
									} else {
										loadingSpinner.classList.add('d-none');
										loadingSpinnerBackground.classList.add('d-none');

										const noResults = document.createElement('p');
										noResults.className = 'text-center text-muted';
										noResults.textContent = 'Keine Trainingspläne in dieser Kategorie gefunden.';
										trainingshalle.appendChild(noResults);
									}
								})
								.catch(error => {
									console.error('Fehler bei der Suchanfrage:', error);
								});
							};


							

							
							
							if (searchButton) {
								searchButton.addEventListener('click', () => performSearch(1));
							}


							if (searchBar) {
								searchBar.addEventListener('keypress', function(event) {
									if (event.key === 'Enter') {
										performSearch(1);
									}
								});
							}

							
							// Globaler Event-Listener für `tabClicked`
							document.addEventListener('tabClicked', function (e) {
								event.preventDefault;
								const { tabName, tabId } = e.detail;
								console.log(`Benutzerdefinierter Tab-Klick erkannt: ${tabName} (ID: ${tabId})`);

								// Eigene Logik basierend auf dem Tab-Namen ausführen
								if (tabName === 'Individuelle Trainingspläne') {
									performSearch_TRAINER(1);
								} else if (tabName === 'Vorgefertigte Trainingspläne') {
									performSearch(1);
								}
							});

						});
					</script>


					
                    <div class="card radius-15">
                        <div class="card-body text-center">
                            <div class="row">
                                <!-- Linke Spalte (kleiner) -->
                                <div class="col-md-4 text-left">
                                    <!-- Kategorien oben -->
                                    <div class="categories">
                                        <ul class="nav nav-pills nav-fill mb-3" id="pills-tab_MAIN" role="tablist">
                                            <li class="nav-item" role="presentation">
                                                <a class="nav-link active" id="pills-Individuell-tab" onclick="performSearch(1);" data-bs-toggle="pill" href="#pills-Individuell" role="tab" aria-controls="pills-Individuell" aria-selected="false">Individuelle Trainingspläne</a>
                                            </li>
                                            <li class="nav-item" role="presentation">
                                                <a class="nav-link" id="pills-Vorgefertigt-tab" onclick="performSearch_TRAINER(1);" data-bs-toggle="pill" href="#pills-Vorgefertigt" role="tab" aria-controls="pills-Vorgefertigt" aria-selected="false">Vorgefertigte Trainingspläne</a>
                                            </li>
                                        </ul>
                    
                                        <div class="tab-content" id="pills-tabContent">
                                            <div class="tab-pane fade active show" id="pills-Vorgefertigt" role="tabpanel" aria-labelledby="pills-Vorgefertigt-tab">
                                                <!-- Suchleiste oben -->
                                                <div class="input-group search-bar mb-3 d-none" style="width: 100%;">
                                                    <input type="text" class="form-control" placeholder="Suche..." aria-label="Suche..." id="search-bar_TRAINER" aria-describedby="button-addon2">
                                                    <button class="btn btn-outline-secondary" type="button" id="button-suche_TRAINER">Suchen</button>
                                                </div>
                                                <!-- Übungen unten -->
                                            </div>
                    
                                            <div class="tab-pane fade" id="pills-Individuell" role="tabpanel" aria-labelledby="pills-Individuell-tab">
                                                <!-- Suchleiste oben -->
                                                <div class="input-group search-bar mb-3 d-none" style="width: 100%;">
                                                    <input type="text" class="form-control" placeholder="Suche..." aria-label="Suche..." id="search-bar" aria-describedby="button-addon2">
                                                    <button class="btn btn-outline-secondary" type="button" id="button-suche">Suchen</button>
                                                </div>
                                                <!-- Übungen unten -->
                                            </div>
                                        </div>
                                    </div>
                    
                                    <!-- Übungen für Trainingshalle -->
                                    <div class="trainingshalle mt-3">
                                        <div style="max-height: 340px; overflow-y: scroll;">
											<!-- HIER WERDEN DIE ANFRAGEN DYNAMISCH GEKADEN -->
                                        </div>
                                        <br>

										<!-- Ladeanimation als Overlay -->
										<div id="loading-spinner" class="loading-overlay d-none">
											<div class="spinner-wrapper">
												<div class="spinner-border text-primary" role="status"></div>
												<p class="loading-text text-white">Bitte warten...</p>
											</div>
										</div>
										<div id="loading-spinnerBackground" class="d-none mb-3">
											<!-- Hier kann eine beliebige Ladeanimation sein, z.B. ein Spinner -->
											<div class="spinner-border text-primary" role="status">
												<span class="sr-only"></span>
											</div>
										</div>

										<style>
											/* Ladeoverlay für den gesamten Bildschirm */
											.loading-overlay {
												position: fixed;
												top: 0;
												left: 0;
												width: 100%;
												height: 100%;
												background-color: rgba(0, 0, 0, 0.6); /* Halbtransparenter schwarzer Hintergrund */
												display: flex;
												justify-content: center;
												align-items: center;
												z-index: 1000; /* Über alle anderen Elemente legen */
											}

											.spinner-border {
												color: var(--primary-color) !important; /* Farbe des Spinners */
											}

											/* Wrapper für den Spinner und den Text */
											.spinner-wrapper {
												display: flex;
												flex-direction: column;
												align-items: center;
												animation: fadeIn 0.5s ease-in-out; /* Sanfte Einblendanimation */
											}

											/* Ladeanimationstext */
											.loading-text {
  												color: var(--primary-color) !important; /* Farbe des Textes */
												margin-top: 15px;
												font-size: 1.2rem;
												animation: pulse 1s infinite; /* Pulsierende Animation */
											}

											/* Animationen */
											@keyframes fadeIn {
												from {
													opacity: 0;
												}
												to {
													opacity: 1;
												}
											}

											@keyframes pulse {
												0%, 100% {
													opacity: 1;
												}
												50% {
													opacity: 0.5;
												}
											}
										</style>
										

                                        <!-- Übungen hier aufführen -->
                                        <nav aria-label="Page navigation example" class="d-flex justify-content-center align-items-center">
                                            <ul class="pagination round-pagination">
                                                <li class="page-item"><a class="page-link" href="javascript:;">Zurück</a></li>
                                                <li class="page-item"><a class="page-link" href="javascript:;">1</a></li>
                                                <li class="page-item active"><a class="page-link" href="javascript:;">2</a></li>
                                                <li class="page-item"><a class="page-link" href="javascript:;">3</a></li>
                                                <li class="page-item"><a class="page-link" href="javascript:;">Weiter</a></li>
                                            </ul>
                                        </nav>
                                    </div>
                                </div>
                    
                                <!-- Rechte Spalte (größer) -->
                                <div class="col-md-8 d-flex justify-content-center align-items-center">
                                    <div class="exercise-details text-center">
                                        <p>Bitte wähle einen Trainingsplan von links aus, um dessen Details zu sehen und mit diesem zu trainieren.</p>

                                        <!-- Details zum Trainingsplan -->
                                        <div class="trainingsplan-info d-none">
                                            <h4>Übungsname</h4>
                                            <h5>Download des Trainingsplans</h5>
											<a target="_blank" href="https://cdn.example.com/trainingsplan-datei/sample-file.pdf" class="btn btn-primary" download>
												Datei herunterladen
											</a>
											<div class="mt-3">
												<!-- Vorschau, wenn Datei eine PDF ist -->
												<iframe src="https://cdn.example.com/trainingsplan-datei/sample-file.pdf" width="100%" height="400px"></iframe>
											</div>
											<!-- Alternativer Text, wenn Datei keine PDF ist -->
											<!--
											<p class="mt-3">Vorschau nicht verfügbar. Bitte laden Sie die Datei herunter.</p>
											-->
                                        </div>
										
                                        <!-- Details zur Übung -->
                                        <div class="exercise-info d-none">
                                            <h4>Übungsname</h4>
                                            <div class="exercise-video">
                                                <video class="w-100" autoplay loop muted controlsList="nodownload">
                                                    <source type="video/mp4">
                                                    Dein Browser unterstützt das Video-Element nicht.
                                                </video>
                                            </div>
											<br>
                                            <div class="exercise-audio">
                                                <audio class="w-100" controls controlsList="nodownload">
                                                    <source type="audio/mp3">
                                                    Dein Browser unterstützt das Video-Element nicht.
                                                </audio>
                                            </div>

											<style>
												.exercise-video {
													border-radius: 40px; /* Oder ein anderer Wert */
													overflow: hidden; /* Um sicherzustellen, dass das Video nicht über die Ecken hinausragt */
												}
											</style>

											<br>
											
											<ul class="nav nav-pills nav-fill mb-3" id="pills-tab" role="tablist">
												<li class="nav-item" role="presentation">
													<a class="nav-link active" id="pills-Hinweise-tab" data-bs-toggle="pill" href="#pills-Hinweise" role="tab" aria-controls="pills-Hinweise" aria-selected="false">Hinweise</a>
												</li>
												<li class="nav-item" role="presentation">
													<a class="nav-link" id="pills-Tipps-tab" data-bs-toggle="pill" href="#pills-Tipps" role="tab" aria-controls="pills-Tipps" aria-selected="false">Tipps</a>
												</li>
												<li class="nav-item" role="presentation">
													<a class="nav-link" id="pills-Muskelgruppen-tab" data-bs-toggle="pill" href="#pills-Muskelgruppen" role="tab" aria-controls="pills-Muskelgruppen" aria-selected="false">Muskelgruppen</a>
												</li>
											</ul>
						
											<div class="tab-content" id="pills-tabContent">
												<div class="tab-pane fade active show" id="pills-Hinweise" role="tabpanel" aria-labelledby="pills-Hinweise-tab">
													<p>Inhalt von "data-hinweise"</p>
												</div>
												<div class="tab-pane fade" id="pills-Tipps" role="tabpanel" aria-labelledby="pills-Tipps-tab">
													<p>Inhalt von "data-hinweise"</p>
												</div>
												<div class="tab-pane fade" id="pills-Muskelgruppen" role="tabpanel" aria-labelledby="pills-Muskelgruppen-tab">
													<p>Inhalt von "data-muskelgruppen"</p>
												</div>
											</div>
                                            <!-- Weitere Details zur Übung -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>                    
                </div>
            </div>
            <!--end page-content-wrapper-->
        </div>
        <!--end page-wrapper-->

		<!--start overlay-->
		<div class="overlay toggle-btn-mobile"></div>
		<!--end overlay-->
		<!--Start Back To Top Button--> <a href="javaScript:;" class="back-to-top"><i class='bx bxs-up-arrow-alt'></i></a>
		<!--End Back To Top Button-->
		
        {{ footer | safe }}

	</div>
	<!-- end wrapper -->
	
    {{ theme_customizer | safe }}
    
	<!-- JavaScript -->
	<!-- Bootstrap JS -->
	<script src="https://cdn.personalpeak360.de/syndash/assets/js/bootstrap.bundle.min.js"></script>
	
	<!--plugins-->
	<script src="https://cdn.personalpeak360.de/syndash/assets/js/jquery.min.js"></script>
	<script src="https://cdn.personalpeak360.de/syndash/assets/plugins/simplebar/js/simplebar.min.js"></script>
	<script src="https://cdn.personalpeak360.de/syndash/assets/plugins/metismenu/js/metisMenu.min.js"></script>
	<script src="https://cdn.personalpeak360.de/syndash/assets/plugins/perfect-scrollbar/js/perfect-scrollbar.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flipdown/dist/flipdown.min.js"></script>
	<!--Data Tables js-->
	<script src="https://cdn.personalpeak360.de/syndash/assets/plugins/datatable/js/jquery.dataTables.min.js"></script>
	<script>
		$(document).ready(function () {
			//Default data table
			$('#example').DataTable();
			var table = $('#example2').DataTable({
				lengthChange: false,
				buttons: ['copy', 'excel', 'pdf', 'print', 'colvis']
			});
			table.buttons().container().appendTo('#example2_wrapper .col-md-6:eq(0)');
		});
	</script>
	<!-- App JS -->
	<script src="https://cdn.personalpeak360.de/syndash/assets/js/app.js"></script>

	
	<script>
		new Vue({
			el: '#app',
			data: {
				error: "{{ error }}",
				success: "{{ success }}",
				punkte: "{{ punkte_nachricht }}"
			},
			methods: {
				showMessages() {
					if (this.isErrorVisible) {
						this.showError();
					}
					if (this.isSuccessVisible) {
						this.showSuccess();
					}
					if (this.isPunkteVisible) {
						this.showPunkte();
					}
				},
				showError() {
					// Create an instance of Notyf
					var message = new nachricht({
						duration: 5000,
						position: {
							x: 'right',
							y: 'top',
						},
						dismissible: true
					});
	
					// Display an error notification
					message.error('{{ error }}');
				},
				showSuccess() {
					// Create an instance of Notyf
					var message = new nachricht({
						duration: 5000,
						position: {
							x: 'right',
							y: 'top',
						},
						dismissible: true
					});
	
					// Display a success notification
					message.success('{{ success }}');
				},
				showPunkte() {
					// Create an instance of Notyf
					var message = new nachricht({
						duration: 5000,
						position: {
							x: 'right',
							y: 'top',
						},
						dismissible: true
					});
	
					// Display points notification
					message.success('{{ punkte }}'); // or use message.error() if it should be an error
				}
			},
			computed: {
				isErrorVisible: function () {
					return this.error && this.error !== '' && this.error !== 'None';
				},
				isSuccessVisible: function() {
					return this.success && this.success !== '' && this.success !== 'None';
				},
				isPunkteVisible: function() {
					return this.punkte && this.punkte !== '' && this.punkte !== 'None';
				}
			},
			watch: {
				isErrorVisible(newVal) {
					if (!newVal) {
						this.closeError();
					}
				},
				isSuccessVisible(newVal) {
					if (!newVal) {
						this.closeSuccess();
					}
				},
				isPunkteVisible(newVal) {
					if (!newVal) {
						this.closePunkte(); // You can implement this method if needed
					}
				}
			},
			created() {
				this.$nextTick(() => {
					this.showMessages();
				})
			}
		});
	</script>	
</body>

</html>